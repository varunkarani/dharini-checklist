<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dharini Checklist</title>
<style>
body{font-family:system-ui;background:#f6f7fb;margin:0;padding:16px}
.card{background:#fff;border-radius:12px;padding:16px;margin-bottom:12px;box-shadow:0 6px 24px rgba(0,0,0,.06)}
button{padding:10px 14px;border-radius:10px;border:0;background:#2f6fed;color:#fff;font-weight:700}
input{padding:8px;border-radius:8px;border:1px solid #ddd;margin-top:6px;width:100%}
</style>
</head>
<body>

<h2>Dharini Checklist (Synced)</h2>
<div id="app"></div>

<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>

<script>
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyAxjeAx9iMHomGppnnouaJ5ISR3AthNEvU",
  authDomain: "dharini-checklist-sync.firebaseapp.com",
  projectId: "dharini-checklist-sync",
  storageBucket: "dharini-checklist-sync.firebasestorage.app",
  messagingSenderId: "428971704286",
  appId: "1:428971704286:web:bd52c5bb86c9ed3725674f"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

const BOARD_ID = "dharini-global-board";

const tasks = [
  "BP Before Breakfast",
  "Sugar Before Breakfast",
  "Novorapid 10u",
  "Pan D",
  "Met XL",
  "Nikoran"
];

const today = new Date().toISOString().split("T")[0];

const docRef = db.collection("boards")
  .doc(BOARD_ID)
  .collection("days")
  .doc(today);

function render(data){
  const app = document.getElementById("app");
  app.innerHTML = "";
  tasks.forEach(t=>{
    const card = document.createElement("div");
    card.className="card";

    const cb = document.createElement("input");
    cb.type="checkbox";
    cb.checked = data?.[t]?.done || false;
    cb.onchange = ()=>{
      docRef.set({
        [t]: {done:cb.checked}
      },{merge:true});
    };

    card.append(t);
    card.appendChild(document.createElement("br"));
    card.appendChild(cb);
    app.appendChild(card);
  });
}

docRef.onSnapshot(doc=>{
  render(doc.data());
});
</script>

</body>
</html>
